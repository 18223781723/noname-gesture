<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport"
		content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>NonameGesture</title>
	<link rel="icon" type="image/x-icon" href="images/favicon.ico">
	<link rel="stylesheet" href="css/demo.css">
</head>

<body>
	<div class="container">
		<img src="images/image.jpg" alt="">
	</div>

	<script src="../dist/noname-gesture.js"></script>
	<script src="js/noname-gesture.js"></script>
	<script>
		// pinch
		const pinchDom = document.querySelector('div.container img');
		const pinchData = { x: 0, y: 45, scale: 1 };
		let lastScale = 1;
		const pinchGesture = new NonameGesture(pinchDom, {
			pinch: function (e) {
				pinchData.scale *= e.stepZoom;
				// e.stepZoom = pinchData.scale / lastScale;
				pinchData.x -= (e.stepZoom - 1) * (e.centerX - pinchData.x) - (e.stepZoom - 1) * result.width * 0.5 - e.stepCenterX;
				pinchData.y -= (e.stepZoom - 1) * (e.centerY - pinchData.y) - (e.stepZoom - 1) * result.height * 0.5 - e.stepCenterY;
				/* pinchData.x -= (e.stepZoom - 1) * (e.centerX - pinchData.x) - (e.stepZoom - 1) * result.width * 0.2 - e.stepCenterX;
				pinchData.y -= (e.stepZoom - 1) * (e.centerY - pinchData.y) - (e.stepZoom - 1) * result.height * 0.8 - e.stepCenterY; */
				/* pinchData.x -= (e.stepZoom - 1) * (e.centerX - pinchData.x) - e.stepCenterX;
				pinchData.y -= (e.stepZoom - 1) * (e.centerY - pinchData.y) - e.stepCenterY; */
				pinchDom.style.transform = 'translate3d(' + pinchData.x + 'px, ' + pinchData.y + 'px, 0px) scale(' + pinchData.scale + ')';
				// lastScale = pinchData.scale;
				e.scale = pinchData.scale;
			}
		});
		const result = pinchGesture.getImgSize(pinchDom.naturalWidth, pinchDom.naturalHeight, window.innerWidth, window.innerHeight);
		pinchDom.style.width = result.width + 'px';
		pinchDom.style.height = result.height + 'px';
		pinchData.x = (window.innerWidth - result.width) * 0.5;
		pinchData.y = (window.innerHeight - result.height) * 0.5;
		pinchDom.style.transform = 'translate3d(' + pinchData.x + 'px, ' + pinchData.y + 'px, 0px) scale(1)';
	</script>
</body>

</html>